name: Build Badminton Circle iOS App

on:
  push:
    branches: [main]
  pull_request:

jobs:
  build:
    name: Build iOS App
    runs-on: macos-latest
    
    steps:
    - name: Checkout Repository
      uses: actions/checkout@v4
    
    - name: Select Xcode Version
      run: sudo xcode-select -s /Applications/Xcode.app
    
    - name: Show Xcode Version
      run: xcodebuild -version
    
    - name: List Available Schemes
      run: xcodebuild -list -project "badminton circle.xcodeproj"
    
    - name: Build Project
      run: |
        xcodebuild clean build \
        -project "badminton circle.xcodeproj" \
        -scheme "badminton-circle" \
        -destination 'platform=iOS Simulator,name=iPhone 16,OS=latest' \
        CODE_SIGNING_REQUIRED=NO \
        CODE_SIGNING_ALLOWED=NO
    
    - name: Upload Build Artifact
      uses: actions/upload-artifact@v4
      with:
        name: BadmintonCircle-App
        path: build/Debug-iphonesimulator/
